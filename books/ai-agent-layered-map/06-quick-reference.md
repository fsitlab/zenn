---
title: "技術と層の対応早見表"
---

# 技術と層の対応早見表

> 5層モデルにおける各技術/規格の関係性を「主体」と「利用」の2軸で整理し、解説章への索引を提供

---

## 凡例

| 記号 | 意味 |
|:--:|:--|
| **✅** | **主体（Define）** - その技術の中心となる層。定義・実装の本体 |
| **🔧** | **利用（Use）** - その技術が利用する機能、または影響を与える層 |
| `-` | 関係なし（素通し含む） |

---

## 5層モデル（参照）

```
第5層：UI・運用層              - ユーザーとの接点（UI）+ LLMに直接関係しない周辺機能
                                （監視、ログ分析、ユーザー管理、認証・認可の基本部分）
第4層：外部ツール層            - ベクトルDB、MCPサーバー、サブエージェント
第3層：LLMオーケストレーション層 - 直接LLMとやり取りする層
                                （ワークフロー、Hooks、MCPクライアント、エージェントランタイム）
第2層：通信層                  - A: クライアント起点 / B: LLM起点
第1層：LLM層                   - モデル、パラメータ、JSON構造
```

---

## 早見表

| 技術/規格 | 第5層 | 第4層 | 第3層 | 第2層A | 第2層B | 第1層 | 解説章 | 備考 |
|:--|:--:|:--:|:--:|:--:|:--:|:--:|:--|:--|
| **── LLM基盤技術 ──** |
| LoRA | - | - | - | - | - | **✅** | 01 | モデル重みの低ランク調整 |
| ファインチューニング | - | - | - | - | - | **✅** | 01 | モデル重みの直接更新 |
| モデル系列（Claude/GPT等） | - | - | - | - | - | **✅** | 01 | 各社のベースモデル |
| MoE（Mixture of Experts） | - | - | - | - | - | **✅** | 01 | 部分パラメータ活性化アーキテクチャ |
| 埋め込みモデル | - | - | - | - | - | **✅** | 01 | テキストのベクトル化 |
| **── パラメータ ──** |
| temperature / top_k / top_p | - | - | - | - | - | **✅** | 01 | 確率的振る舞いの制御 |
| max_tokens | - | - | - | - | - | **✅** | 01 | 出力長制限 |
| Extended Thinking | - | - | - | - | - | **✅** | 01 | 思考プロセス出力 |
| Prompt Caching | - | - | - | - | - | **✅** | 01 | キャッシュ制御タグ |
| **── プロンプト工学 ──** |
| system prompt | - | - | - | **✅** | - | 🔧 | 02 | Clientが送信、LLMが受信 |
| プロンプトチューニング | - | - | - | **✅** | - | 🔧 | 02 | 2層Aで設計、1層に影響 |
| **── ツール利用 ──** |
| ツール宣言（tools[]） | - | - | - | **✅** | - | 🔧 | 02, 03 | Clientが宣言、LLMが読む |
| ツール利用判断（tool_use） | - | - | - | 🔧 | **✅** | 🔧 | 02 | LLMが出力、Clientが受信 |
| ツール実行 | - | 🔧 | **✅** | - | - | - | 03 | 3層が4層ツールを実行 |
| ツールの外部プログラム動作 | - |　**✅** | 🔧 | - | - | - | 04_a | 外部プログラムが動作し、結果返却|
| **── MCP ──** |
| MCP（プロトコル全体） | - | **✅** | **✅** | 🔧 | - | - | 03, 04_a | 3層-4層間を定義 |
| MCPサーバー | - | **✅** | - | - | - | - | 04_a | 外部ツールとして提供 |
| MCPクライアント | - | - | **✅** | 🔧 | - | - | 03 | tools[]変換を担当 |
| .mcp.json | - | - | **✅** | - | - | - | 04_c | 設定ファイル |
| MCP経由のツール実行 | - | **✅** |**✅** | 🔧 | **✅** | 🔧 | 04_a | LLMが出力、3層が受信してツール実行 |
| **── RAG ──** |
| 従来型RAG | - | 🔧 | **✅** | **✅** | - | - | 04_a | 3層が4層を使い2層Aに注入 |
| ツール型RAG | - | **✅** | 🔧 | 🔧 | **✅** | 🔧 | 04_a | LLMが主体的に検索 |
| ベクトルDB | - | **✅** | 🔧 | - | - | - | 04_a | 4層の実装、3層が利用 |
| **── Claude Code固有 ──** |
| CLAUDE.md | - | - | 🔧 | **✅** | - | - | 04_c, 07_a | 3層が読み込み2層Aに展開 |
| Skill（定義） | - | - | **✅** | 🔧 | - | - | 07_a | 3層でロード、2層Aに注入 |
| Skill（ロード後） | - | - | - | **✅** | - | - | 07_a | プロンプトとして展開済み |
| Hooks | - | - | **✅** | - | - | - | 07_a | 決定論的制御（LLM操作にフィードバック） |
| Permissions | - | - | **✅** | - | - | - | 07_a | 権限管理（LLM操作に波及する場合） |
| **── マルチエージェント ──** |
| サブエージェント | - | **✅** | 🔧 | 🔧 | 🔧 | 🔧 | 04_b | 4層で実行、全層に影響 |
| Agent Teams | - | 🔧 | **✅** | 🔧 | - | - | 04_b | 3層で設計、4層を束ねる |
| A2A（エージェント間通信） | - | **✅** | 🔧 | 🔧 | - | - | 04_b | 4層間の通信プロトコル |
| **── セキュリティ ──** |
| ガードレール（Hooks） | - | - | **✅** | - | - | - | 03, 09 | LLM出力の検証・フィルタリング |
| プロンプトインジェクション対策 | - | - | **✅** | 🔧 | - | - | 09 | 入力サニタイズ、出力検証 |
| RBAC（ロールベースアクセス制御） | **✅** | - | 🔧 | - | - | - | 05, 09 | 権限制御でLLM操作に波及→3層 |
| Cedar認可 | - | - | **✅** | - | - | - | 07_d | AgentCoreの宣言的ポリシー |
| 多層防御 | **✅** | **✅** | **✅** | **✅** | - | **✅** | 09 | 複数層にまたがるセキュリティ設計 |
| 最小権限原則 | - | 🔧 | **✅** | - | - | - | 09 | ツール・権限の最小化 |
| **── UI・運用 ──** |
| Kiro（AI IDE） | **✅** | **✅** | **✅** | 🔧 | 🔧 | 🔧 | 07_d | UI（5層）+オーケストレーション（3層）＋ファイル編集・テスト実行（4層） |
| VSCode + AI拡張 | **✅** | - | 🔧 | - | - | - | 05 | UI（5層）として3層を利用 |
| Claude.ai | **✅** | - | - | - | - | - | 05 | UI（5層）のみ、3層はクラウド側 |
| Cursor | **✅** | - | **✅** | 🔧 | 🔧 | 🔧 | 07_b | UI（5層）+オーケストレーション（3層） |
| Dify | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 🔧 | 05, 07_c | UI（5層）+ワークフロー（3層）+ツール（4層） |
| 監視・ログ分析 | **✅** | - | - | - | - | - | 05 | LLMに直接関係しない周辺機能 |
| ユーザー管理 | **✅** | - | - | - | - | - | 05 | LLMに直接関係しない周辺機能 |
| ユーザ認証・認可（基本） | **✅** | - | - | - | - | - | 05, 09 | ※権限制御でLLM操作に波及→3層 |
| **── フレームワーク ──** |
| LangChain | - | 🔧 | **✅** | 🔧 | - | 🔧 | 07_d | 汎用LLMフレームワーク |
| LangGraph | - | 🔧 | **✅** | - | - | - | 07_d | グラフベースワークフロー |
| Strands Agents | - | 🔧 | **✅** | 🔧 | - | 🔧 | 07_d | AWS Bedrockエージェント |
| Bedrock AgentCore | 🔧 | **✅** | **✅** | 🔧 | - | 🔧 | 07_d | マネージドランタイム+Cedar認可 |
| **── その他AI用語 ──** |
| ハルシネーション | - | 🔧 | 🔧 | - | - | **✅** | 01, 09 | 多層で防御が必要 |
| コンテキストウィンドウ | - | - | - | 🔧 | - | **✅** | 01, 02 | トークン数制限 |
| ストリーミング（SSE） | - | - | 🔧 | 🔧 | **✅** | - | 02 | LLMレスポンスの段階的取得 |
| Structured Output | - | - | - | **✅** | **✅** | 🔧 | 02 | JSON Schema出力保証 |

---

## 読み方のポイント

### ✅の位置 = その技術の本体

- **LoRA**: ✅が1層のみ → モデル内部で完結、他層に影響しない
- **MCP**: ✅が3層と4層 → MCPはLLMオーケストレーション層と外部ツール層の間を定義
- **Kiro**: ✅が3層、4層、5層 → UI・運用（5層）とLLMオーケストレーション（3層）、ファイル読み書き・テスト実行（4層）の全てを持つ
- **多層防御**: ✅が複数層 → 単一層では完結せず、複数層での対策が必要

### 🔧の位置 = その技術が利用する機能

- **ツール利用判断**: ✅が2層B（LLM起点）、🔧が2層A（Clientに返る）と1層（LLM機能依存）
- **ツール型RAG**: ✅が2層B（LLM主導）と4層（DB）、🔧が広範囲に影響

### UIだけのサービス（Claude.ai等）

- ✅が5層のみ、🔧なし → ユーザーインターフェースとして機能
- 3層のランタイムはクラウド側（Anthropic）が持つ

### 解説章の使い方

- **解説章**カラムを参照し、詳細を知りたい技術の章番号を確認
- 複数章にまたがる技術は、カンマ区切りで記載（例: `02, 03`）

---

## 層別：何が属するか

### 第1層（LLM層）で完結するもの
- LoRA、ファインチューニング、MoE
- temperature、top_k、max_tokens
- Extended Thinking、Prompt Caching
- 埋め込みモデル、ハルシネーション（発生源）

### 第2層A（クライアント起点）で定義されるもの
- system prompt
- ツール宣言（tools[]）
- CLAUDE.md、Skill（展開後）
- プロンプトチューニング
- Structured Output（スキーマ定義）

### 第2層B（LLM起点）で定義されるもの
- ツール利用判断（tool_use）
- ツール型RAGの検索要求
- ストリーミング（SSE）

### 第3層（LLMオーケストレーション層）で定義されるもの
- ツール実行
- MCPクライアント、Hooks、Permissions
- ワークフロー（LLM操作）
- エージェントランタイム
- Skill（定義・ロード制御）
- 従来型RAG（パイプライン）
- Agent Teams（設計）
- ガードレール、プロンプトインジェクション対策
- Cedar認可、最小権限原則

### 第4層（外部ツール層）で定義されるもの
- MCPサーバー
- ベクトルDB
- サブエージェント
- A2Aエージェント
- ローカルファイル読み書き
- コマンド実行、AIによるPC画面操作
- サンドボックス環境

### 第5層（UI・運用層）で定義されるもの
- VSCode、Cursor（UI部分）
- Claude.ai、ChatGPT
- Dify（UI部分）
- 監視・ログ分析
- ユーザー管理
- ユーザ認証・認可（基本部分）※権限制御でLLM操作に波及する場合は第3層
- RBAC（基本部分）

---

## 相性問題と層の関係

| 問題 | 関係する層 | 原因 |
|--|--|--|
| APIフォーマット不一致 | 1層 | ベンダー間のJSON形式差 |
| tool descriptionが貧弱 | 2層A→2層B | LLMがツールを使わない |
| MCPスキーマ不正 | 3層↔4層 | サーバー実装のJSON誤り |
| CLAUDE.mdが巨大 | 2層A | コンテキスト汚染 |
| 従来RAGとTool型RAGの混同 | 2層A vs 2層B | 主体が異なる |
| フレームワーク間通信 | 3層↔4層 | A2A未対応 |
| プロンプトインジェクション | 2層A・3層 | 入力検証の不備 |
| 権限昇格 | 3層・5層 | 最小権限原則の未適用 |

---

## 章番号対応表

| 章番号 | 章タイトル | 主要トピック |
|:--|:--|:--|
| 01 | LLM層 | LoRA、ファインチューニング、モデル系列、パラメータ |
| 02 | 通信層 | プロンプト、ツール宣言、API形式差分 |
| 03 | LLMオーケストレーション層 | ワークフロー、Hooks、MCPクライアント |
| 04_a | 外部ツール層（MCP・RAG） | MCP、RAG、ベクトルDB |
| 04_b | エージェント連携 | サブエージェント、Agent Teams、A2A |
| 04_c | Claude設定ファイル | CLAUDE.md、.mcp.json |
| 05 | UI・運用層 | IDE統合、監視、ユーザー管理 |
| 07_a | Claude Code | Hooks、Skills、Permissions |
| 07_b | IDE統合AI | Cursor、Copilot |
| 07_c | Dify | ローコードプラットフォーム |
| 07_d | フレームワーク | LangChain、Strands Agents、AgentCore |
| 09 | セキュリティ | OWASP Top 10、多層防御、認可 |

---

## 製品別早見表

> AI関連製品・サービスを5層モデルで分類。各製品がどの層に主体（✅）を持ち、どの層を利用（🔧）するかを一覧化。

### LLMモデル（第1層）

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Claude (Sonnet/Opus/Haiku) | Anthropic | - | - | - | 🔧 | **✅** | 01 | tool_use対応、Extended Thinking |
| GPT-4 / GPT-4o / o1 | OpenAI | - | - | - | 🔧 | **✅** | 01 | function calling対応 |
| Gemini | Google | - | - | - | 🔧 | **✅** | 01 | マルチモーダル対応 |
| LLaMA 3 | Meta | - | - | - | 🔧 | **✅** | 01 | オープンウェイト |
| Mistral | Mistral AI | - | - | - | 🔧 | **✅** | 01 | MoE採用モデルあり |
| Qwen | Alibaba | - | - | - | 🔧 | **✅** | 01 | 多言語対応 |
| DeepSeek | DeepSeek | - | - | - | 🔧 | **✅** | 01 | 推論特化モデルあり |
| Command R | Cohere | - | - | - | 🔧 | **✅** | 01 | RAG最適化 |
| Phi | Microsoft | - | - | - | 🔧 | **✅** | 01 | 小型高性能 |

### コーディングエージェント

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Claude Code | Anthropic | **✅** | **✅** | **✅** | 🔧 | 🔧 | 07_a | CLI型、MCP対応、Hooks/Skills |
| Cursor | Cursor Inc | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 07_b | VSCode fork、複数LLM対応 |
| GitHub Copilot | GitHub/MS | **✅** | - | 🔧 | 🔧 | 🔧 | 07_b | IDE拡張、Agent Mode |
| OpenAI Codex CLI | OpenAI | **✅** | **✅** | **✅** | 🔧 | 🔧 | 07_f | CLI型、AGENTS.md |
| Windsurf | Codeium | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | AI統合IDE |
| Kiro | AWS | **✅** | **✅** | **✅** | 🔧 | 🔧 | 07_d | Specs、Steering |
| Goose | Block Inc | **✅** | **✅** | **✅** | 🔧 | 🔧 | 05 | OSS、複数LLM対応 |
| Aider | OSS | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | ペアプログラミング |
| Amazon Q Developer | AWS | **✅** | 🔧 | 🔧 | 🔧 | 🔧 | 07_f | AWS統合 |

### チャットUI・消費者向けサービス

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| ChatGPT | OpenAI | **✅** | 🔧 | - | - | - | 07_e | Web UI、GPTs、Deep Research |
| Claude.ai | Anthropic | **✅** | - | - | - | - | 05 | Web UI、Projects |
| Gemini | Google | **✅** | - | - | - | - | 05 | Web UI、マルチモーダル |
| Perplexity | Perplexity AI | **✅** | 🔧 | - | - | - | 05 | 検索特化 |
| 源内 | デジタル庁 | **✅** | - | - | - | - | 07_f | 政府向け |
| GenU | AWS | **✅** | 🔧 | 🔧 | - | - | 07_f | エンタープライズ |
| ChatGPT Enterprise | OpenAI | **✅** | 🔧 | - | - | - | 07_e | 企業向け |

### クラウドAIサービス（API提供）

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Amazon Bedrock | AWS | - | **✅** | **✅** | 🔧 | 🔧 | 07_d | マルチモデル、ナレッジベース |
| Azure OpenAI Service | Microsoft | - | 🔧 | 🔧 | 🔧 | **✅** | 07_f | Azure統合 |
| Google Vertex AI | Google | - | 🔧 | 🔧 | 🔧 | **✅** | 07_f | GCP統合 |
| Anthropic API | Anthropic | - | - | - | 🔧 | **✅** | 02 | 直接API |

### エージェントフレームワーク

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| LangChain | LangChain Inc | - | 🔧 | **✅** | 🔧 | 🔧 | 07_d | 汎用フレームワーク |
| LangGraph | LangChain Inc | - | 🔧 | **✅** | - | - | 07_d | グラフベースワークフロー |
| LlamaIndex | LlamaIndex | - | **✅** | **✅** | 🔧 | 🔧 | 07_d | RAG特化 |
| Strands Agents | AWS | - | 🔧 | **✅** | 🔧 | 🔧 | 07_d | SDK、軽量 |
| Amazon Bedrock AgentCore | AWS | 🔧 | **✅** | **✅** | 🔧 | 🔧 | 07_d | マネージドランタイム、Cedar |
| Google ADK | Google | - | **✅** | **✅** | 🔧 | 🔧 | 07_d | A2A対応 |
| Azure AI Agent Service | Microsoft | 🔧 | **✅** | **✅** | 🔧 | 🔧 | 07_f | Azure統合 |
| AutoGen | Microsoft | - | 🔧 | **✅** | 🔧 | 🔧 | 07_f | マルチエージェント |
| CrewAI | CrewAI | - | 🔧 | **✅** | 🔧 | 🔧 | 07_f | ロールベースエージェント |
| Antigravity | Anthropic | - | 🔧 | **✅** | 🔧 | 🔧 | 07_f | Claude特化 |

### ローコード/ノーコードプラットフォーム

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Dify | Dify | **✅** | **✅** | **✅** | 🔧 | 🔧 | 07_c | ワークフロー、ナレッジベース |
| Flowise | OSS | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | LangChain UI |
| n8n | n8n | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | ワークフロー自動化 |
| LangFlow | LangChain Inc | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | ビジュアルエディタ |

### ベクトルDB・検索エンジン（第4層）

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Pinecone | Pinecone | - | **✅** | - | - | - | 04_a | マネージド |
| Chroma | Chroma | - | **✅** | - | - | - | 04_a | OSS、軽量 |
| Qdrant | Qdrant | - | **✅** | - | - | - | 04_a | Rust製 |
| Weaviate | Weaviate | - | **✅** | - | - | - | 04_a | GraphQL対応 |
| Milvus | Zilliz | - | **✅** | - | - | - | 04_a | 大規模対応 |
| pgvector | OSS | - | **✅** | - | - | - | 04_a | PostgreSQL拡張 |
| Elasticsearch | Elastic | - | **✅** | - | - | - | 04_a | ハイブリッド検索 |
| OpenSearch | AWS | - | **✅** | - | - | - | 04_a | AWS統合 |

### LLMサービング・推論エンジン

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| Ollama | Ollama | **✅** | - | 🔧 | 🔧 | **✅** | 01 | ローカル実行、CLI |
| vLLM | vLLM Project | - | - | 🔧 | 🔧 | **✅** | 01 | 高速推論 |
| llama.cpp | OSS | - | - | - | 🔧 | **✅** | 01 | CPU/GPU対応 |
| HuggingFace TGI | HuggingFace | - | - | 🔧 | 🔧 | **✅** | 01 | 本番向けサービング |
| LiteLLM | OSS | - | - | **✅** | 🔧 | 🔧 | 07_d | 統一API、プロキシ |

### プロトコル・標準

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| MCP | Anthropic | - | **✅** | **✅** | 🔧 | - | 03, 04_a | ツール標準化 |
| A2A | Google | - | **✅** | 🔧 | 🔧 | - | 04_b | エージェント間通信 |
| AGENTS.md | OpenAI | - | - | 🔧 | **✅** | - | 07_f | OpenAI標準 |

### IDE・開発ツール

| 製品名 | 提供元 | 第5層 | 第4層 | 第3層 | 第2層 | 第1層 | 解説章 | 備考 |
|:--|:--|:--:|:--:|:--:|:--:|:--:|:--|:--|
| VSCode | Microsoft | **✅** | - | - | - | - | 05 | AI拡張で連携 |
| JetBrains IDEs | JetBrains | **✅** | - | - | - | - | 07_b | AI Assistant対応 |
| Cline | OSS | **✅** | **✅** | **✅** | 🔧 | 🔧 | 07_b | VSCode拡張、MCP対応 |
| Continue | OSS | **✅** | 🔧 | **✅** | 🔧 | 🔧 | 05 | オープンソースAI拡張 |

---

### 製品カテゴリ別の層の傾向

| カテゴリ | 主体層 | 特徴 |
|:--|:--|:--|
| **LLMモデル** | 第1層 | 第2層を通じて利用される |
| **コーディングエージェント** | 第3層・第5層 | UI＋オーケストレーション＋ツール実行 |
| **チャットUI** | 第5層 | UIのみ、バックエンドは別 |
| **クラウドAPI** | 第1層・第4層 | モデルホスティング＋マネージドツール |
| **フレームワーク** | 第3層 | LLMオーケストレーション中心 |
| **ローコード** | 第3層・第5層 | UI＋ワークフロー |
| **ベクトルDB** | 第4層 | 外部ツールとして機能 |
| **LLMサービング** | 第1層 | モデル実行環境 |

---

*作成日: 2026-02-22*
*対応モデル: 5層モデル*
